using System;
using System.Collections.Generic;
using System.Numerics;
using ChainSafe.Gaming.Mud;
using ChainSafe.Gaming.Mud.Storages.InMemory;
using ChainSafe.Gaming.Mud.Tables;
using ChainSafe.Gaming.Mud.Worlds;
using NUnit.Framework;

namespace ChainSafe.Gaming.Tests
{
    [TestFixture(Ignore = "CI test environment should be configured first to meet the prerequisites for the MUD project execution.")]
    public class MudTests
    {
        private const string ContractAddress = "0x8d8b6b8414e1e3dcfd4168561b9be6bd3bf6ec4b";
        private const string ContractAbi = "[\n  {\n    \"type\": \"function\",\n    \"name\": \"app__addDebt\",\n    \"inputs\": [\n      {\n        \"name\": \"id\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"app__increment\",\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"batchCall\",\n    \"inputs\": [\n      {\n        \"name\": \"systemCalls\",\n        \"type\": \"tuple[]\",\n        \"internalType\": \"struct SystemCallData[]\",\n        \"components\": [\n          {\n            \"name\": \"systemId\",\n            \"type\": \"bytes32\",\n            \"internalType\": \"ResourceId\"\n          },\n          {\n            \"name\": \"callData\",\n            \"type\": \"bytes\",\n            \"internalType\": \"bytes\"\n          }\n        ]\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"returnDatas\",\n        \"type\": \"bytes[]\",\n        \"internalType\": \"bytes[]\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"batchCallFrom\",\n    \"inputs\": [\n      {\n        \"name\": \"systemCalls\",\n        \"type\": \"tuple[]\",\n        \"internalType\": \"struct SystemCallFromData[]\",\n        \"components\": [\n          {\n            \"name\": \"from\",\n            \"type\": \"address\",\n            \"internalType\": \"address\"\n          },\n          {\n            \"name\": \"systemId\",\n            \"type\": \"bytes32\",\n            \"internalType\": \"ResourceId\"\n          },\n          {\n            \"name\": \"callData\",\n            \"type\": \"bytes\",\n            \"internalType\": \"bytes\"\n          }\n        ]\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"returnDatas\",\n        \"type\": \"bytes[]\",\n        \"internalType\": \"bytes[]\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"call\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"callData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"payable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"callFrom\",\n    \"inputs\": [\n      {\n        \"name\": \"delegator\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"callData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"payable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"creator\",\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"deleteRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getDynamicField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getDynamicFieldLength\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getDynamicFieldSlice\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"end\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getFieldLayout\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getFieldLength\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getFieldLength\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getKeySchema\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"keySchema\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"Schema\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"staticData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"dynamicData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"staticData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"dynamicData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getStaticField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getValueSchema\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"valueSchema\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"Schema\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"grantAccess\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"grantee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"initialize\",\n    \"inputs\": [\n      {\n        \"name\": \"initModule\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IModule\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"installModule\",\n    \"inputs\": [\n      {\n        \"name\": \"module\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IModule\"\n      },\n      {\n        \"name\": \"encodedArgs\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"installRootModule\",\n    \"inputs\": [\n      {\n        \"name\": \"module\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IModule\"\n      },\n      {\n        \"name\": \"encodedArgs\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"popFromDynamicField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"byteLengthToPop\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"pushToDynamicField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"dataToPush\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerDelegation\",\n    \"inputs\": [\n      {\n        \"name\": \"delegatee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"delegationControlId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"initCallData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerFunctionSelector\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"systemFunctionSignature\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"worldFunctionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerNamespace\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerNamespaceDelegation\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"delegationControlId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"initCallData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerRootFunctionSelector\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"worldFunctionSignature\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      },\n      {\n        \"name\": \"systemFunctionSignature\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"worldFunctionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerStoreHook\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"hookAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IStoreHook\"\n      },\n      {\n        \"name\": \"enabledHooksBitmap\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerSystem\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"system\",\n        \"type\": \"address\",\n        \"internalType\": \"contract System\"\n      },\n      {\n        \"name\": \"publicAccess\",\n        \"type\": \"bool\",\n        \"internalType\": \"bool\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerSystemHook\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"hookAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"contract ISystemHook\"\n      },\n      {\n        \"name\": \"enabledHooksBitmap\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerTable\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      },\n      {\n        \"name\": \"keySchema\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"Schema\"\n      },\n      {\n        \"name\": \"valueSchema\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"Schema\"\n      },\n      {\n        \"name\": \"keyNames\",\n        \"type\": \"string[]\",\n        \"internalType\": \"string[]\"\n      },\n      {\n        \"name\": \"fieldNames\",\n        \"type\": \"string[]\",\n        \"internalType\": \"string[]\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"renounceOwnership\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"revokeAccess\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"grantee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setDynamicField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"staticData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"dynamicData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setStaticField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"spliceDynamicData\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"startWithinField\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"deleteCount\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"spliceStaticData\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint48\",\n        \"internalType\": \"uint48\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"storeVersion\",\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"name\": \"version\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"transferBalanceToAddress\",\n    \"inputs\": [\n      {\n        \"name\": \"fromNamespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"toAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"amount\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"transferBalanceToNamespace\",\n    \"inputs\": [\n      {\n        \"name\": \"fromNamespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"toNamespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"amount\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"transferOwnership\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"newOwner\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"unregisterDelegation\",\n    \"inputs\": [\n      {\n        \"name\": \"delegatee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"unregisterNamespaceDelegation\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"unregisterStoreHook\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"hookAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IStoreHook\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"unregisterSystemHook\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"hookAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"contract ISystemHook\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"worldVersion\",\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"HelloStore\",\n    \"inputs\": [\n      {\n        \"name\": \"storeVersion\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"HelloWorld\",\n    \"inputs\": [\n      {\n        \"name\": \"worldVersion\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"Store_DeleteRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"indexed\": false,\n        \"internalType\": \"bytes32[]\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"Store_SetRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"indexed\": false,\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"staticData\",\n        \"type\": \"bytes\",\n        \"indexed\": false,\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"indexed\": false,\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"dynamicData\",\n        \"type\": \"bytes\",\n        \"indexed\": false,\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"Store_SpliceDynamicData\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"indexed\": false,\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"indexed\": false,\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint48\",\n        \"indexed\": false,\n        \"internalType\": \"uint48\"\n      },\n      {\n        \"name\": \"deleteCount\",\n        \"type\": \"uint40\",\n        \"indexed\": false,\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"indexed\": false,\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"indexed\": false,\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"Store_SpliceStaticData\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"indexed\": false,\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint48\",\n        \"indexed\": false,\n        \"internalType\": \"uint48\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"indexed\": false,\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"EncodedLengths_InvalidLength\",\n    \"inputs\": [\n      {\n        \"name\": \"length\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_Empty\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_InvalidStaticDataLength\",\n    \"inputs\": [\n      {\n        \"name\": \"staticDataLength\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"computedStaticDataLength\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_StaticLengthDoesNotFitInAWord\",\n    \"inputs\": [\n      {\n        \"name\": \"index\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_StaticLengthIsNotZero\",\n    \"inputs\": [\n      {\n        \"name\": \"index\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_StaticLengthIsZero\",\n    \"inputs\": [\n      {\n        \"name\": \"index\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_TooManyDynamicFields\",\n    \"inputs\": [\n      {\n        \"name\": \"numFields\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"maxFields\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_TooManyFields\",\n    \"inputs\": [\n      {\n        \"name\": \"numFields\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"maxFields\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Module_AlreadyInstalled\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Module_MissingDependency\",\n    \"inputs\": [\n      {\n        \"name\": \"dependency\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Module_NonRootInstallNotSupported\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Module_RootInstallNotSupported\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Schema_InvalidLength\",\n    \"inputs\": [\n      {\n        \"name\": \"length\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Schema_StaticTypeAfterDynamicType\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Slice_OutOfBounds\",\n    \"inputs\": [\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"end\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_IndexOutOfBounds\",\n    \"inputs\": [\n      {\n        \"name\": \"length\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"accessedIndex\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidBounds\",\n    \"inputs\": [\n      {\n        \"name\": \"start\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"end\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidFieldNamesLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidKeyNamesLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidResourceType\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"bytes2\",\n        \"internalType\": \"bytes2\"\n      },\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidSplice\",\n    \"inputs\": [\n      {\n        \"name\": \"startWithinField\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"deleteCount\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"fieldLength\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidStaticDataLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidValueSchemaDynamicLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidValueSchemaLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidValueSchemaStaticLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_TableAlreadyExists\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"tableIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_TableNotFound\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"tableIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_AccessDenied\",\n    \"inputs\": [\n      {\n        \"name\": \"resource\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      },\n      {\n        \"name\": \"caller\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_AlreadyInitialized\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_CallbackNotAllowed\",\n    \"inputs\": [\n      {\n        \"name\": \"functionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_DelegationNotFound\",\n    \"inputs\": [\n      {\n        \"name\": \"delegator\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"delegatee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_FunctionSelectorAlreadyExists\",\n    \"inputs\": [\n      {\n        \"name\": \"functionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_FunctionSelectorNotFound\",\n    \"inputs\": [\n      {\n        \"name\": \"functionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InsufficientBalance\",\n    \"inputs\": [\n      {\n        \"name\": \"balance\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"amount\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InterfaceNotSupported\",\n    \"inputs\": [\n      {\n        \"name\": \"contractAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"interfaceId\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InvalidNamespace\",\n    \"inputs\": [\n      {\n        \"name\": \"namespace\",\n        \"type\": \"bytes14\",\n        \"internalType\": \"bytes14\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InvalidResourceId\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InvalidResourceType\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"bytes2\",\n        \"internalType\": \"bytes2\"\n      },\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_ResourceAlreadyExists\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_ResourceNotFound\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_SystemAlreadyExists\",\n    \"inputs\": [\n      {\n        \"name\": \"system\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_UnlimitedDelegationNotAllowed\",\n    \"inputs\": []\n  }\n]";

        [Test]
        public void RecordsAccumulateInMemoryAndHaveCorrectValuesTest()
        {
            // Assemble
            var web3 = BuildWeb3();

            // Act
            var world = BuildMudWorld(web3);

            var table = world.GetTable("Counter");

            var queryTask = table.Query(MudQuery.All);
            var records = queryTask.Result;

            // Assert
            Assert.AreEqual(1, records.Length);

            var firstColumnValueOfSingleRecord = (BigInteger)records[0][0];
            Assert.Greater(firstColumnValueOfSingleRecord, 0);

            Console.WriteLine($"Counter is {firstColumnValueOfSingleRecord}");
        }

        [Test]
        public void SystemCallsTest() // todo run
        {
            // Assemble
            var web3 = BuildWeb3();
            var world = BuildMudWorld(web3);

            // Act
            var valueBeforeIncrement = (BigInteger)world.GetTable("Counter").Query(MudQuery.All).Result[0][0];
            world.GetSystems().Send("increment").Wait();
            var valueAfterIncrement = (BigInteger)world.GetTable("Counter").Query(MudQuery.All).Result[0][0]; // todo make tables update on log events

            // Assert
            Assert.Greater(valueAfterIncrement, valueBeforeIncrement);
        }

        private static Web3.Web3 BuildWeb3()
        {
            var web3Task = Web3Util.CreateWeb3(services =>
            {
                services.UseMud(new MudConfig
                {
                    StorageConfig = new InMemoryMudStorageConfig
                    {
                        FromBlockNumber = 0,
                    },
                });
            });

            var web3 = web3Task.Result;
            return web3;
        }

        private static MudWorld BuildMudWorld(Web3.Web3 web3)
        {
            var worldTask = web3.Mud().BuildWorld(new MudWorldConfig
            {
                ContractAddress = ContractAddress,
                ContractAbi = ContractAbi,
                DefaultNamespace = "app",
                TableSchemas = new List<MudTableSchema>
                {
                    new()
                    {
                        Namespace = "app",
                        TableName = "Counter",
                        Columns = new List<KeyValuePair<string, string>>
                        {
                            new("value", "uint32"),
                        },
                    },
                },
            });

            var world = worldTask.Result;
            return world;
        }
    }
}