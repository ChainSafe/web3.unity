using ChainSafe.Gaming.Lootboxes.Chainlink;
using ChainSafe.Gaming.UnityPackage.Common;
using ChainSafe.Gaming.Web3.Build;
using Microsoft.Extensions.DependencyInjection;
using UnityEngine;

namespace LootBoxes.Chainlink
{
    /// <summary>
    /// Configures Lootboxes services to work with a <see cref="ILoginProvider"/>.
    /// </summary>
    public class LootboxesServicesAdapter : MonoBehaviour, IWeb3BuilderServiceAdapter
    {
        // the default values are setup for sepolia.
        [SerializeField] private string contractAddress = "0x1993e2dD323B5dcBd8b52dB7d370bC36D280424B";
        
        [SerializeField] private string contractAbi = "[     {       \"inputs\": [],       \"name\": \"AcceptingOnlyLINK\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         }       ],       \"name\": \"AccessDenied\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"value\",           \"type\": \"uint256\"         }       ],       \"name\": \"AmountPerUnitOverflow\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"tokenId\",           \"type\": \"uint256\"         }       ],       \"name\": \"DepositStateCorruption\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"EndOfService\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"InsufficientFee\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"InsufficientGas\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"InsufficientPayment\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"supply\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"requested\",           \"type\": \"uint256\"         }       ],       \"name\": \"InsufficientSupply\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"InvalidLength\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"int256\",           \"name\": \"value\",           \"type\": \"int256\"         }       ],       \"name\": \"InvalidLinkPrice\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"InvalidLootboxType\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"requestId\",           \"type\": \"uint256\"         }       ],       \"name\": \"InvalidRequestAllocation\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"InvalidTokenAmount\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         }       ],       \"name\": \"InventoryStateCorruption\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"enum LootboxInterface.RewardType\",           \"name\": \"oldType\",           \"type\": \"uint8\"         },         {           \"internalType\": \"enum LootboxInterface.RewardType\",           \"name\": \"newType\",           \"type\": \"uint8\"         }       ],       \"name\": \"ModifiedRewardType\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"NoTokens\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"NothingToClaim\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"NothingToRecover\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"OnlyThis\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"requestId\",           \"type\": \"uint256\"         }       ],       \"name\": \"PendingOpenRequest\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         }       ],       \"name\": \"RewardWithdrawalDenied\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"from\",           \"type\": \"address\"         }       ],       \"name\": \"SupplyDenied\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"supply\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"unitsToGet\",           \"type\": \"uint256\"         }       ],       \"name\": \"SupplyExceeded\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         }       ],       \"name\": \"TokenDenied\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"currentPrice\",           \"type\": \"uint256\"         }       ],       \"name\": \"UnexpectedPrice\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"enum LootboxInterface.RewardType\",           \"name\": \"rewardType\",           \"type\": \"uint8\"         }       ],       \"name\": \"UnexpectedRewardType\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"value\",           \"type\": \"uint256\"         }       ],       \"name\": \"UnitsOverflow\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"Unsupported\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"ViewCallFailed\",       \"type\": \"error\"     },     {       \"inputs\": [],       \"name\": \"ZeroAmount\",       \"type\": \"error\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"id\",           \"type\": \"uint256\"         }       ],       \"name\": \"ZeroSupply\",       \"type\": \"error\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"opener\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"tokenId\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"amount\",           \"type\": \"uint256\"         }       ],       \"name\": \"Allocated\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"tokenId\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"amountPerUnit\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"newSupply\",           \"type\": \"uint256\"         }       ],       \"name\": \"AmountPerUnitSet\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"operator\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"bool\",           \"name\": \"approved\",           \"type\": \"bool\"         }       ],       \"name\": \"ApprovalForAll\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"opener\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"requestId\",           \"type\": \"uint256\"         }       ],       \"name\": \"BoxesRecovered\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"caller\",           \"type\": \"address\"         }       ],       \"name\": \"EmergencyModeEnabled\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"enum LootboxInterface.RewardType\",           \"name\": \"tokenType\",           \"type\": \"uint8\"         },         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"to\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256[]\",           \"name\": \"ids\",           \"type\": \"uint256[]\"         },         {           \"indexed\": false,           \"internalType\": \"uint256[]\",           \"name\": \"amounts\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"EmergencyWithdrawal\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"requestId\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"bytes\",           \"name\": \"reason\",           \"type\": \"bytes\"         }       ],       \"name\": \"OpenRequestFailed\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"requestId\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"randomness\",           \"type\": \"uint256\"         }       ],       \"name\": \"OpenRequestFulfilled\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"opener\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"unitsToGet\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"requestId\",           \"type\": \"uint256\"         }       ],       \"name\": \"OpenRequested\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         }       ],       \"name\": \"Paused\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"newPrice\",           \"type\": \"uint256\"         }       ],       \"name\": \"PriceUpdated\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"opener\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"tokenId\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"amount\",           \"type\": \"uint256\"         }       ],       \"name\": \"RewardsClaimed\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": true,           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         },         {           \"indexed\": true,           \"internalType\": \"bytes32\",           \"name\": \"previousAdminRole\",           \"type\": \"bytes32\"         },         {           \"indexed\": true,           \"internalType\": \"bytes32\",           \"name\": \"newAdminRole\",           \"type\": \"bytes32\"         }       ],       \"name\": \"RoleAdminChanged\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": true,           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"sender\",           \"type\": \"address\"         }       ],       \"name\": \"RoleGranted\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": true,           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"sender\",           \"type\": \"address\"         }       ],       \"name\": \"RoleRevoked\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"buyer\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"amount\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"payment\",           \"type\": \"uint256\"         }       ],       \"name\": \"Sold\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"supplier\",           \"type\": \"address\"         }       ],       \"name\": \"SupplierAdded\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"supplier\",           \"type\": \"address\"         }       ],       \"name\": \"SupplierRemoved\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         }       ],       \"name\": \"TokenAdded\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"operator\",           \"type\": \"address\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"from\",           \"type\": \"address\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"to\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256[]\",           \"name\": \"ids\",           \"type\": \"uint256[]\"         },         {           \"indexed\": false,           \"internalType\": \"uint256[]\",           \"name\": \"values\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"TransferBatch\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"operator\",           \"type\": \"address\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"from\",           \"type\": \"address\"         },         {           \"indexed\": true,           \"internalType\": \"address\",           \"name\": \"to\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"id\",           \"type\": \"uint256\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"value\",           \"type\": \"uint256\"         }       ],       \"name\": \"TransferSingle\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"string\",           \"name\": \"value\",           \"type\": \"string\"         },         {           \"indexed\": true,           \"internalType\": \"uint256\",           \"name\": \"id\",           \"type\": \"uint256\"         }       ],       \"name\": \"URI\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         }       ],       \"name\": \"Unpaused\",       \"type\": \"event\"     },     {       \"anonymous\": false,       \"inputs\": [         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"token\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"address\",           \"name\": \"to\",           \"type\": \"address\"         },         {           \"indexed\": false,           \"internalType\": \"uint256\",           \"name\": \"amount\",           \"type\": \"uint256\"         }       ],       \"name\": \"Withdraw\",       \"type\": \"event\"     },     {       \"inputs\": [],       \"name\": \"DEFAULT_ADMIN_ROLE\",       \"outputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"\",           \"type\": \"bytes32\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"FACTORY\",       \"outputs\": [         {           \"internalType\": \"contract ILootboxFactory\",           \"name\": \"\",           \"type\": \"address\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"LINK_ETH_FEED\",       \"outputs\": [         {           \"internalType\": \"contract AggregatorV3Interface\",           \"name\": \"\",           \"type\": \"address\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"MINTER_ROLE\",       \"outputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"\",           \"type\": \"bytes32\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"PAUSER_ROLE\",       \"outputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"\",           \"type\": \"bytes32\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"_requestId\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"_randomness\",           \"type\": \"uint256\"         }       ],       \"name\": \"_allocateRewards\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address[]\",           \"name\": \"_suppliers\",           \"type\": \"address[]\"         }       ],       \"name\": \"addSuppliers\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address[]\",           \"name\": \"_tokens\",           \"type\": \"address[]\"         }       ],       \"name\": \"addTokens\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"id\",           \"type\": \"uint256\"         }       ],       \"name\": \"balanceOf\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address[]\",           \"name\": \"accounts\",           \"type\": \"address[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"ids\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"balanceOfBatch\",       \"outputs\": [         {           \"internalType\": \"uint256[]\",           \"name\": \"\",           \"type\": \"uint256[]\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"id\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"value\",           \"type\": \"uint256\"         }       ],       \"name\": \"burn\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"ids\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"values\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"burnBatch\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"_amount\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"_maxPrice\",           \"type\": \"uint256\"         }       ],       \"name\": \"buy\",       \"outputs\": [],       \"stateMutability\": \"payable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"uint32\",           \"name\": \"_gas\",           \"type\": \"uint32\"         },         {           \"internalType\": \"uint256\",           \"name\": \"_gasPriceInWei\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"_units\",           \"type\": \"uint256\"         }       ],       \"name\": \"calculateOpenPrice\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"_opener\",           \"type\": \"address\"         }       ],       \"name\": \"canClaimRewards\",       \"outputs\": [         {           \"internalType\": \"bool\",           \"name\": \"\",           \"type\": \"bool\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"_opener\",           \"type\": \"address\"         }       ],       \"name\": \"claimRewards\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"_token\",           \"type\": \"address\"         },         {           \"internalType\": \"enum LootboxInterface.RewardType\",           \"name\": \"_type\",           \"type\": \"uint8\"         },         {           \"internalType\": \"address\",           \"name\": \"_to\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_ids\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_amounts\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"emergencyWithdraw\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getAllowedTokenTypes\",       \"outputs\": [         {           \"internalType\": \"enum LootboxInterface.RewardType[]\",           \"name\": \"result\",           \"type\": \"uint8[]\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getAllowedTokens\",       \"outputs\": [         {           \"internalType\": \"address[]\",           \"name\": \"\",           \"type\": \"address[]\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getAvailableSupply\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getInventory\",       \"outputs\": [         {           \"components\": [             {               \"internalType\": \"address\",               \"name\": \"rewardToken\",               \"type\": \"address\"             },             {               \"internalType\": \"enum LootboxInterface.RewardType\",               \"name\": \"rewardType\",               \"type\": \"uint8\"             },             {               \"internalType\": \"uint256\",               \"name\": \"units\",               \"type\": \"uint256\"             },             {               \"internalType\": \"uint256\",               \"name\": \"amountPerUnit\",               \"type\": \"uint256\"             },             {               \"internalType\": \"uint256\",               \"name\": \"balance\",               \"type\": \"uint256\"             },             {               \"components\": [                 {                   \"internalType\": \"uint256\",                   \"name\": \"id\",                   \"type\": \"uint256\"                 },                 {                   \"internalType\": \"uint256\",                   \"name\": \"units\",                   \"type\": \"uint256\"                 },                 {                   \"internalType\": \"uint256\",                   \"name\": \"amountPerUnit\",                   \"type\": \"uint256\"                 },                 {                   \"internalType\": \"uint256\",                   \"name\": \"balance\",                   \"type\": \"uint256\"                 }               ],               \"internalType\": \"struct LootboxInterface.ExtraRewardInfo[]\",               \"name\": \"extra\",               \"type\": \"tuple[]\"             }           ],           \"internalType\": \"struct LootboxInterface.RewardView[]\",           \"name\": \"result\",           \"type\": \"tuple[]\"         },         {           \"components\": [             {               \"internalType\": \"address\",               \"name\": \"rewardToken\",               \"type\": \"address\"             },             {               \"internalType\": \"enum LootboxInterface.RewardType\",               \"name\": \"rewardType\",               \"type\": \"uint8\"             },             {               \"internalType\": \"uint256\",               \"name\": \"units\",               \"type\": \"uint256\"             },             {               \"internalType\": \"uint256\",               \"name\": \"amountPerUnit\",               \"type\": \"uint256\"             },             {               \"internalType\": \"uint256\",               \"name\": \"balance\",               \"type\": \"uint256\"             },             {               \"components\": [                 {                   \"internalType\": \"uint256\",                   \"name\": \"id\",                   \"type\": \"uint256\"                 },                 {                   \"internalType\": \"uint256\",                   \"name\": \"units\",                   \"type\": \"uint256\"                 },                 {                   \"internalType\": \"uint256\",                   \"name\": \"amountPerUnit\",                   \"type\": \"uint256\"                 },                 {                   \"internalType\": \"uint256\",                   \"name\": \"balance\",                   \"type\": \"uint256\"                 }               ],               \"internalType\": \"struct LootboxInterface.ExtraRewardInfo[]\",               \"name\": \"extra\",               \"type\": \"tuple[]\"             }           ],           \"internalType\": \"struct LootboxInterface.RewardView[]\",           \"name\": \"leftoversResult\",           \"type\": \"tuple[]\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getLink\",       \"outputs\": [         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getLinkPrice\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getLootboxTypes\",       \"outputs\": [         {           \"internalType\": \"uint256[]\",           \"name\": \"\",           \"type\": \"uint256[]\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"_opener\",           \"type\": \"address\"         }       ],       \"name\": \"getOpenerRequestDetails\",       \"outputs\": [         {           \"components\": [             {               \"internalType\": \"address\",               \"name\": \"opener\",               \"type\": \"address\"             },             {               \"internalType\": \"uint96\",               \"name\": \"unitsToGet\",               \"type\": \"uint96\"             },             {               \"internalType\": \"uint256[]\",               \"name\": \"lootIds\",               \"type\": \"uint256[]\"             },             {               \"internalType\": \"uint256[]\",               \"name\": \"lootAmounts\",               \"type\": \"uint256[]\"             }           ],           \"internalType\": \"struct LootboxInterface.Request\",           \"name\": \"request\",           \"type\": \"tuple\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getPrice\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         }       ],       \"name\": \"getRoleAdmin\",       \"outputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"\",           \"type\": \"bytes32\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         },         {           \"internalType\": \"uint256\",           \"name\": \"index\",           \"type\": \"uint256\"         }       ],       \"name\": \"getRoleMember\",       \"outputs\": [         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         }       ],       \"name\": \"getRoleMemberCount\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getSuppliers\",       \"outputs\": [         {           \"internalType\": \"address[]\",           \"name\": \"\",           \"type\": \"address[]\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"getVRFV2Wrapper\",       \"outputs\": [         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         },         {           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         }       ],       \"name\": \"grantRole\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         },         {           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         }       ],       \"name\": \"hasRole\",       \"outputs\": [         {           \"internalType\": \"bool\",           \"name\": \"\",           \"type\": \"bool\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         },         {           \"internalType\": \"address\",           \"name\": \"operator\",           \"type\": \"address\"         }       ],       \"name\": \"isApprovedForAll\",       \"outputs\": [         {           \"internalType\": \"bool\",           \"name\": \"\",           \"type\": \"bool\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"isEmergencyMode\",       \"outputs\": [         {           \"internalType\": \"bool\",           \"name\": \"\",           \"type\": \"bool\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"to\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"id\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"amount\",           \"type\": \"uint256\"         },         {           \"internalType\": \"bytes\",           \"name\": \"data\",           \"type\": \"bytes\"         }       ],       \"name\": \"mint\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"to\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"ids\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"amounts\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"bytes\",           \"name\": \"data\",           \"type\": \"bytes\"         }       ],       \"name\": \"mintBatch\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address[]\",           \"name\": \"_tos\",           \"type\": \"address[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_lootboxTypes\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_amounts\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"mintToMany\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         },         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"bytes\",           \"name\": \"\",           \"type\": \"bytes\"         }       ],       \"name\": \"onERC1155BatchReceived\",       \"outputs\": [         {           \"internalType\": \"bytes4\",           \"name\": \"\",           \"type\": \"bytes4\"         }       ],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         },         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         },         {           \"internalType\": \"bytes\",           \"name\": \"\",           \"type\": \"bytes\"         }       ],       \"name\": \"onERC1155Received\",       \"outputs\": [         {           \"internalType\": \"bytes4\",           \"name\": \"\",           \"type\": \"bytes4\"         }       ],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         },         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         },         {           \"internalType\": \"bytes\",           \"name\": \"\",           \"type\": \"bytes\"         }       ],       \"name\": \"onERC721Received\",       \"outputs\": [         {           \"internalType\": \"bytes4\",           \"name\": \"\",           \"type\": \"bytes4\"         }       ],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"uint32\",           \"name\": \"_gas\",           \"type\": \"uint32\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_lootIds\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_lootAmounts\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"open\",       \"outputs\": [],       \"stateMutability\": \"payable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"\",           \"type\": \"address\"         }       ],       \"name\": \"openerRequests\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"pause\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"paused\",       \"outputs\": [         {           \"internalType\": \"bool\",           \"name\": \"\",           \"type\": \"bool\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"_requestId\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_randomWords\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"rawFulfillRandomWords\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"_opener\",           \"type\": \"address\"         }       ],       \"name\": \"recoverBoxes\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address[]\",           \"name\": \"_suppliers\",           \"type\": \"address[]\"         }       ],       \"name\": \"removeSuppliers\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         },         {           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         }       ],       \"name\": \"renounceRole\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes32\",           \"name\": \"role\",           \"type\": \"bytes32\"         },         {           \"internalType\": \"address\",           \"name\": \"account\",           \"type\": \"address\"         }       ],       \"name\": \"revokeRole\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"from\",           \"type\": \"address\"         },         {           \"internalType\": \"address\",           \"name\": \"to\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"ids\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"amounts\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"bytes\",           \"name\": \"data\",           \"type\": \"bytes\"         }       ],       \"name\": \"safeBatchTransferFrom\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"from\",           \"type\": \"address\"         },         {           \"internalType\": \"address\",           \"name\": \"to\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"id\",           \"type\": \"uint256\"         },         {           \"internalType\": \"uint256\",           \"name\": \"amount\",           \"type\": \"uint256\"         },         {           \"internalType\": \"bytes\",           \"name\": \"data\",           \"type\": \"bytes\"         }       ],       \"name\": \"safeTransferFrom\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address[]\",           \"name\": \"_tokens\",           \"type\": \"address[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_ids\",           \"type\": \"uint256[]\"         },         {           \"internalType\": \"uint256[]\",           \"name\": \"_amountsPerUnit\",           \"type\": \"uint256[]\"         }       ],       \"name\": \"setAmountsPerUnit\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"operator\",           \"type\": \"address\"         },         {           \"internalType\": \"bool\",           \"name\": \"approved\",           \"type\": \"bool\"         }       ],       \"name\": \"setApprovalForAll\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"_newPrice\",           \"type\": \"uint256\"         }       ],       \"name\": \"setPrice\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"string\",           \"name\": \"_baseURI\",           \"type\": \"string\"         }       ],       \"name\": \"setURI\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"_from\",           \"type\": \"address\"         }       ],       \"name\": \"supplyAllowed\",       \"outputs\": [         {           \"internalType\": \"bool\",           \"name\": \"\",           \"type\": \"bool\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"bytes4\",           \"name\": \"interfaceId\",           \"type\": \"bytes4\"         }       ],       \"name\": \"supportsInterface\",       \"outputs\": [         {           \"internalType\": \"bool\",           \"name\": \"\",           \"type\": \"bool\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"_token\",           \"type\": \"address\"         }       ],       \"name\": \"tokenAllowed\",       \"outputs\": [         {           \"internalType\": \"bool\",           \"name\": \"\",           \"type\": \"bool\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"unitsMinted\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"unitsRequested\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"unitsSupply\",       \"outputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"unpause\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"uint256\",           \"name\": \"\",           \"type\": \"uint256\"         }       ],       \"name\": \"uri\",       \"outputs\": [         {           \"internalType\": \"string\",           \"name\": \"\",           \"type\": \"string\"         }       ],       \"stateMutability\": \"view\",       \"type\": \"function\"     },     {       \"inputs\": [],       \"name\": \"viewCall\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     },     {       \"inputs\": [         {           \"internalType\": \"address\",           \"name\": \"_token\",           \"type\": \"address\"         },         {           \"internalType\": \"address payable\",           \"name\": \"_to\",           \"type\": \"address\"         },         {           \"internalType\": \"uint256\",           \"name\": \"_amount\",           \"type\": \"uint256\"         }       ],       \"name\": \"withdraw\",       \"outputs\": [],       \"stateMutability\": \"nonpayable\",       \"type\": \"function\"     }   ]";
        
        public Web3Builder ConfigureServices(Web3Builder web3Builder)
        {
            return web3Builder.Configure(services =>
            {
                services.UseChainlinkLootboxService(new LootboxServiceConfig
                {
                    ContractAddress = contractAddress,
                    ContractAbi = contractAbi
                });
                services.AddSingleton<Erc1155MetaDataReader>();
            });
        }
    }
}
