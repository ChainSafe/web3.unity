(this.webpackJsonpweb3gl=this.webpackJsonpweb3gl||[]).push([[37],{1515:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return v}));var n=r(2),o=r.n(n),i=r(38),s=r(1),a=r(4),u=r(10),c=r(5),p=r(6),f=r(1516),l=r(1031),d=r(759),g=r(623);function E(e,t,r){var n=new g.TransportError(t,r);return n.originalError=e,n}var _=function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};function h(t,r,n,o){var i=function(t,r){for(var n=e.alloc(t.length),o=0;o<t.length;o++)n[o]=t[o]^r[o%r.length];return n}(t,n),s=e.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),a={version:"U2F_V2",keyHandle:_(i.toString("base64")),challenge:_(s.toString("base64")),appId:location.origin};return Object(d.a)("apdu","=> "+t.toString("hex")),Object(f.sign)(a,r/1e3).then((function(t){var r,n=t.signatureData;if("string"===typeof n){var i,s=e.from((r=n).replace(/-/g,"+").replace(/_/g,"/")+"==".substring(0,3*r.length%4),"base64");return i=o?s.slice(5):s,Object(d.a)("apdu","<= "+i.toString("hex")),i}throw t}))}var m=[];var v=function(t){Object(c.a)(n,t);var r=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=r.call(this)).scrambleKey=void 0,e.unwrap=!0,m.push(Object(u.a)(e)),e}return Object(a.a)(n,[{key:"exchange",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t,this.exchangeTimeout,this.scrambleKey,this.unwrap);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!("object"===typeof e.t0.metaData)){e.next=14;break}throw 5===e.t0.metaData.code&&(m.forEach((function(e){return e.emit("disconnect")})),m=[]),E(e.t0,"Failed to sign with Ledger device: U2F "+e.t0.metaData.type,"U2F_"+e.t0.metaData.code);case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setScrambleKey",value:function(t){this.scrambleKey=e.from(t,"ascii")}},{key:"setUnwrap",value:function(e){this.unwrap=e}},{key:"close",value:function(){return Promise.resolve()}}],[{key:"open",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:5e3,e.abrupt("return",new n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(l.a);v.isSupported=f.isSupported,v.list=function(){return Object(f.isSupported)().then((function(e){return e?[null]:[]}))},v.listen=function(e){var t=!1;return Object(f.isSupported)().then((function(r){t||(r?(e.next({type:"add",descriptor:null}),e.complete()):e.error(new g.TransportError("U2F browser support is needed for Ledger. Please use Chrome, Opera or Firefox with a U2F extension. Also make sure you're on an HTTPS connection","U2FNotSupported")))})),{unsubscribe:function(){t=!0}}}}.call(this,r(8).Buffer)},1516:function(e,t,r){"use strict";e.exports=r(1517)},1517:function(e,t,r){"use strict";(function(t){e.exports=c;var n=r(1518),o="undefined"!==typeof navigator&&!!navigator.userAgent,i=o&&navigator.userAgent.match(/Safari\//)&&!navigator.userAgent.match(/Chrome\//),s=o&&navigator.userAgent.match(/Edge\/1[2345]/),a=null;function u(e){return a||(a=new e((function(e,t){function r(){e({u2f:null,native:!0})}return o?i?r():("undefined"!==typeof window.u2f&&"function"===typeof window.u2f.sign&&e({u2f:window.u2f,native:!0}),s||"http:"===location.protocol||"undefined"===typeof MessageChannel?r():void n.isSupported((function(t){t?e({u2f:n,native:!1}):r()}))):r()}))),a}function c(e){return{isSupported:l.bind(e),ensureSupport:g.bind(e),register:E.bind(e),sign:_.bind(e),ErrorCodes:c.ErrorCodes,ErrorNames:c.ErrorNames}}function p(e,t){var r=null!=t?t.errorCode:1,n=c.ErrorNames[""+r],o=new Error(e);return o.metaData={type:n,code:r},o}function f(e,t){var r={};return r.promise=new e((function(e,n){r.resolve=e,r.reject=n,t.then(e,n)})),r.promise.cancel=function(t,n){u(e).then((function(e){n&&!e.native&&e.u2f.disconnect(),r.reject(p(t,{errorCode:-1}))}))},r}function l(){return u(this).then((function(e){return!!e.u2f}))}function d(e){if(!e.u2f){if("http:"===location.protocol)throw new Error("U2F isn't supported over http, only https");throw new Error("U2F not supported")}}function g(){return u(this).then(d)}function E(e,t,r){var n=this;return Array.isArray(e)||(e=[e]),"number"===typeof t&&"undefined"===typeof r&&(r=t,t=null),t||(t=[]),f(n,u(n).then((function(o){d(o);var i=o.native,s=o.u2f;return new n((function(n,o){if(i){var a=e[0].appId;s.register(a,e,t,(function(e){e.errorCode?o(p("Registration failed",e)):(delete e.errorCode,n(e))}),r)}else s.register(e,t,(function(e,t){e?o(e):t.errorCode?o(p("Registration failed",t)):n(t)}),r)}))}))).promise}function _(e,t){var r=this;return Array.isArray(e)||(e=[e]),f(r,u(r).then((function(n){d(n);var o=n.native,i=n.u2f;return new r((function(r,n){if(o){var s=e[0].appId,a=e[0].challenge;i.sign(s,a,e,(function(e){e.errorCode?n(p("Sign failed",e)):(delete e.errorCode,r(e))}),t)}else i.sign(e,(function(e,t){e?n(e):t.errorCode?n(p("Sign failed",t)):r(t)}),t)}))}))).promise}function h(e){c[e]=function(){if(!t.Promise)throw new Error("The platform doesn't natively support promises");var r=[].slice.call(arguments);return c(t.Promise)[e].apply(null,r)}}c.ErrorCodes={CANCELLED:-1,OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},c.ErrorNames={"-1":"CANCELLED",0:"OK",1:"OTHER_ERROR",2:"BAD_REQUEST",3:"CONFIGURATION_UNSUPPORTED",4:"DEVICE_INELIGIBLE",5:"TIMEOUT"},h("isSupported"),h("ensureSupport"),h("register"),h("sign")}).call(this,r(19))},1518:function(e,t,r){"use strict";var n=n||{};e.exports=n,n.EXTENSION_ID="kmendfapggjehodndflmmgagdbamhnfd",n.MessageTypes={U2F_REGISTER_REQUEST:"u2f_register_request",U2F_SIGN_REQUEST:"u2f_sign_request",U2F_REGISTER_RESPONSE:"u2f_register_response",U2F_SIGN_RESPONSE:"u2f_sign_response"},n.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},n.Request,n.Response,n.Error,n.SignRequest,n.SignResponse,n.RegisterRequest,n.RegisterResponse,n.disconnect=function(){n.port_&&n.port_.port_&&(n.port_.port_.disconnect(),n.port_=null)},n.getMessagePort=function(e){if("undefined"!=typeof chrome&&chrome.runtime){var t={type:n.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(n.EXTENSION_ID,t,(function(){chrome.runtime.lastError?n.getIframePort_(e):n.getChromeRuntimePort_(e)}))}else n.getIframePort_(e)},n.getChromeRuntimePort_=function(e){var t=chrome.runtime.connect(n.EXTENSION_ID,{includeTlsChannelId:!0});setTimeout((function(){e(null,new n.WrappedChromeRuntimePort_(t))}),0)},n.WrappedChromeRuntimePort_=function(e){this.port_=e},n.WrappedChromeRuntimePort_.prototype.postMessage=function(e){this.port_.postMessage(e)},n.WrappedChromeRuntimePort_.prototype.addEventListener=function(e,t){var r=e.toLowerCase();"message"==r||"onmessage"==r?this.port_.onMessage.addListener((function(e){t({data:e})})):console.error("WrappedChromeRuntimePort only supports onMessage")},n.getIframePort_=function(e){var t="chrome-extension://"+n.EXTENSION_ID,r=document.createElement("iframe");r.src=t+"/u2f-comms.html",r.setAttribute("style","display:none"),document.body.appendChild(r);var o=!1,i=new MessageChannel;i.port1.addEventListener("message",(function t(r){"ready"==r.data?(i.port1.removeEventListener("message",t),o||(o=!0,e(null,i.port1))):console.error('First event on iframe port was not "ready"')})),i.port1.start(),r.addEventListener("load",(function(){r.contentWindow.postMessage("init",t,[i.port2])})),setTimeout((function(){o||(o=!0,e(new Error("IFrame extension not supported")))}),200)},n.EXTENSION_TIMEOUT_SEC=30,n.port_=null,n.waitingForPort_=[],n.reqCounter_=0,n.callbackMap_={},n.getPortSingleton_=function(e){n.port_?e(null,n.port_):(0==n.waitingForPort_.length&&n.getMessagePort((function(e,t){for(e||(n.port_=t,n.port_.addEventListener("message",n.responseHandler_));n.waitingForPort_.length;)n.waitingForPort_.shift()(e,t)})),n.waitingForPort_.push(e))},n.responseHandler_=function(e){var t=e.data,r=t.requestId;if(r&&n.callbackMap_[r]){var o=n.callbackMap_[r];delete n.callbackMap_[r],o(null,t.responseData)}else console.error("Unknown or missing requestId in response.")},n.isSupported=function(e){n.getPortSingleton_((function(t,r){e(!t)}))},n.sign=function(e,t,r){n.getPortSingleton_((function(o,i){if(o)return t(o);var s=++n.reqCounter_;n.callbackMap_[s]=t;var a={type:n.MessageTypes.U2F_SIGN_REQUEST,signRequests:e,timeoutSeconds:"undefined"!==typeof r?r:n.EXTENSION_TIMEOUT_SEC,requestId:s};i.postMessage(a)}))},n.register=function(e,t,r,o){n.getPortSingleton_((function(i,s){if(i)return r(i);var a=++n.reqCounter_;n.callbackMap_[a]=r;var u={type:n.MessageTypes.U2F_REGISTER_REQUEST,signRequests:t,registerRequests:e,timeoutSeconds:"undefined"!==typeof o?o:n.EXTENSION_TIMEOUT_SEC,requestId:a};s.postMessage(u)}))}}}]);